# 🏗 CatchTable 프로젝트
Spring Boot 기반의 **레스토랑 예약 및 테이블 관리 서비스**입니다.  
MySQL을 데이터베이스로 활용하며, **Redis를 사용하여 데이터 조회 성능을 최적화**했습니다.  
대량의 요청을 효율적으로 처리하기 위해 **QueryDSL을 사용한 동적 검색 및 트랜잭션 처리 최적화**를 적용했습니다.

## 📄 API 명세서  
👉 [CatchTable API 명세서](https://branched-provelone-770.notion.site/catch-table-api-47fa060a7e5d4219ac28ef0c0b10ef0b?pvs=74)

## 🛠 기술 스택  
- **Language**: Java 22  
- **Framework**: Spring Boot  
- **DB**: MySQL  
- **Cache**: Redis  
- **Build Tool**: Gradle  
- **Containerization**: Docker  
- **ORM**: JPA (Hibernate)  


## ⚙️ 개발 진행 방식 및 주요 설계 결정
### 1️⃣ JPA 엔티티 매핑 시 DTO를 분리하여 최적화
#### 📌 문제점
- JPA의 **Lazy Loading**으로 인해 **불필요한 연관 엔티티까지 함께 조회되는 문제 발생**.
- 특정 API에서 필요한 데이터만 반환하려 해도 **JPA의 기본 동작으로 인해 과도한 데이터가 조회됨**.
- 엔티티를 직접 반환하면 **변경 가능성이 있는 내부 필드가 노출될 위험이 있음**.

#### ✅ 해결 방법
- **조회와 등록/수정을 분리**하여 `DTO`를 나눠서 사용.
- **조회 시 DTO 변환**을 통해 필요한 필드만 반환하도록 최적화.
- **JPA 엔티티를 직접 노출하지 않고 DTO를 사용하여 응답을 통제**.

---

### 2️⃣ Redis를 활용한 성능 최적화
#### 📌 문제점
- **DB 부하를 줄이고, 자주 조회되는 데이터(예: 매장 리스트)를 빠르게 반환할 필요가 있음**.
- **예약 가능 좌석 수를 빠르게 조회하고, 동시성 문제를 방지해야 함**.

#### ✅ 해결 방법
- **자주 조회되는 데이터(매장 목록, 좌석 수 등)는 Redis에 캐싱하여 빠르게 반환**.
- **예약 시 Redis에서 좌석 수를 먼저 확인하고 감소 후, 최종적으로 DB에 반영**.
- **Redisson을 활용하여 분산 락을 적용하여 동시 예약 문제 방지**.
- **선착순 보장이 아닌 제한된 예약 수에 맞춰 중복 예약만 방지하기 때문에 Set 자료구조 사용 **

---

### 3️⃣ QueryDSL을 활용한 동적 검색
#### 📌 문제점
- `findByNameOrCodeOrDate()` 같은 Spring Data JPA 방식은 **동적 검색이 어려움**.
- `@Query`를 사용할 수 있지만, **조건이 많아지면 유지보수성이 떨어짐**.

#### ✅ 해결 방법
- **QueryDSL을 사용하여 동적으로 검색 조건을 조합**.
- **페이징을 함께 적용하여 성능 최적화**.

---

### 4️⃣ 트랜잭션 및 동시성 처리
#### 📌 문제점
- 예약 시스템에서 **동시성 문제**가 발생할 가능성이 있음 (동시에 여러 사용자가 같은 좌석을 예약할 수 있음).
- **DB 트랜잭션만으로 해결하려면 락이 걸려 성능 저하 발생 가능**.

#### ✅ 해결 방법
- **Redis + Redisson을 사용하여 분산 락 적용**.
- **트랜잭션을 `@Transactional`로 관리하며, Redis를 이용한 선반영 기법 적용**.

